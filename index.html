<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AND FIX</title>
    <script src="https://meet.jit.si/external_api.js"></script>
    <style>
        :root { --main: #00ff88; --bg: #000; --card: #111; --text: #eee; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* –ö–ù–û–ü–ö–ò –¢–ï–ü–ï–†–¨ –°–í–ï–†–•–£ –î–õ–Ø –£–î–û–ë–°–¢–í–ê */
        nav { display: flex; background: var(--card); border-bottom: 1px solid #222; }
        .nav-item { flex: 1; padding: 15px; text-align: center; font-size: 12px; font-weight: bold; cursor: pointer; color: #666; }
        .nav-item.active { color: var(--main); border-bottom: 2px solid var(--main); }

        .content { flex: 1; overflow-y: auto; padding: 10px; }
        .box { background: var(--card); padding: 15px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #222; }
        
        input, textarea { width: 100%; padding: 10px; background: #1a1a1a; border: 1px solid #333; color: #fff; border-radius: 5px; box-sizing: border-box; margin-bottom: 10px; }
        .btn { background: var(--main); color: #000; border: none; padding: 10px; width: 100%; border-radius: 5px; font-weight: bold; }
        
        #v-chat { width: 100%; height: 300px; background: #000; border-radius: 10px; margin-top: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <div class="nav-item active" id="n-feed" onclick="tab('feed')">–õ–ï–ù–¢–ê</div>
    <div class="nav-item" id="n-call" onclick="tab('call')">–í–ò–î–ï–û</div>
    <div class="nav-item" id="n-sec" onclick="tab('sec')">–°–ï–ö–†–ï–¢</div>
</nav>

<div class="content">
    <div id="t-feed">
        <div class="box">
            <input type="text" id="search" placeholder="üîç –ü–æ–∏—Å–∫..." oninput="render()">
            <textarea id="msg" placeholder="–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞..." rows="2"></textarea>
            <button class="btn" onclick="send()">–û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨</button>
        </div>
        <div id="feed"></div>
    </div>

    <div id="t-call" class="hidden">
        <div class="box">
            <input type="text" id="room" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã">
            <button class="btn" onclick="startCall()">–í–û–ô–¢–ò –í –ó–í–û–ù–û–ö</button>
            <div id="v-chat" class="hidden"></div>
        </div>
    </div>

    <div id="t-sec" class="hidden">
        <div class="box">
            <input type="password" id="pass" placeholder="–ü–∞—Ä–æ–ª—å">
            <button class="btn" style="background:#ff0055" onclick="unlock()">–í–û–ô–¢Y</button>
        </div>
        <div id="s-content" class="hidden">
            <div id="s-feed"></div>
        </div>
    </div>
</div>

<script>
    let posts = JSON.parse(localStorage.getItem('p')) || [];
    let api = null;

    function send() {
        let t = document.getElementById('msg'); if(!t.value.trim()) return;
        posts.unshift({t: t.value, d: new Date().toLocaleTimeString()});
        t.value = ''; localStorage.setItem('p', JSON.stringify(posts)); render();
    }

    function render() {
        let q = document.getElementById('search').value.toLowerCase();
        document.getElementById('feed').innerHTML = posts.filter(p => p.t.toLowerCase().includes(q))
            .map(p => `<div class="box"><small style="color:var(--main)">${p.d}</small><div>${p.t}</div></div>`).join('');
    }

    function startCall() {
        let r = document.getElementById('room').value || 'AND-Room';
        let v = document.getElementById('v-chat'); v.classList.remove('hidden');
        if(api) api.dispose();
        api = new JitsiMeetExternalAPI("meet.jit.si", { roomName: r, parentNode: v, width: '100%', height: 300 });
    }

    function tab(name) {
        ['feed', 'call', 'sec'].forEach(x => {
            document.getElementById('t-'+x).classList.toggle('hidden', x !== name);
            document.getElementById('n-'+x).classList.toggle('active', x === name);
        });
        if(name !== 'call' && api) api.dispose();
    }

    function unlock() {
        if(document.getElementById('pass').value === '1234') {
            document.getElementById('s-content').classList.remove('hidden');
            alert('–î–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç');
        } else { alert('–û—à–∏–±–∫–∞'); }
    }

    render(); // –ó–∞–ø—É—Å–∫ –ª–µ–Ω—Ç—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
</script>
</body>
</html>
