<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AND | All-in-One Network</title>
    <script src="https://meet.jit.si/external_api.js"></script>
    <style>
        :root { --main: #00ff88; --bg: #050505; --card: #111111; --text: #ffffff; --gray: #888888; --accent: #ff3b3b; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; overflow-x: hidden; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        nav { 
            position: fixed; bottom: 0; width: 100%; background: rgba(17, 17, 17, 0.95); 
            display: flex; justify-content: space-around; padding: 15px 0;
            border-top: 1px solid #222; z-index: 1000; backdrop-filter: blur(10px);
        }
        .nav-item { cursor: pointer; font-size: 12px; font-weight: bold; opacity: 0.5; color: var(--text); text-align: center; transition: 0.3s; }
        .nav-item.active { opacity: 1; color: var(--main); text-shadow: 0 0 10px var(--main); }

        /* –°—Ç—Ä–∞–Ω–∏—Ü—ã */
        .page { display: none; padding: 20px; padding-bottom: 100px; max-width: 500px; margin: 0 auto; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .logo { font-size: 32px; font-weight: 900; letter-spacing: -2px; color: var(--main); margin-bottom: 20px; }
        .card { background: var(--card); border-radius: 20px; padding: 20px; margin-bottom: 15px; border: 1px solid #222; }

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        button { background: var(--main); border: none; color: black; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; font-size: 14px; }
        input, textarea { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #222; background: #000; color: white; margin-bottom: 10px; box-sizing: border-box; }

        /* –ü–æ—Å—Ç—ã */
        .post-img { width: 100%; border-radius: 15px; margin-top: 10px; }

        /* –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π */
        .friend-item { display: flex; align-items: center; gap: 15px; padding: 10px 0; border-bottom: 1px solid #222; }
        .status-dot { width: 8px; height: 8px; background: var(--main); border-radius: 50%; }

        /* –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä */
        #chat-window { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 2000; flex-direction: column; }
        .chat-header { padding: 20px; background: var(--card); display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #222; }
        .messages-area { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .msg { max-width: 80%; padding: 12px; border-radius: 15px; font-size: 14px; }
        .msg.sent { align-self: flex-end; background: var(--main); color: black; }
        .msg.received { align-self: flex-start; background: #222; }

        /* –í–∏–¥–µ–æ */
        #video-container { width: 100%; height: 350px; background: #000; border-radius: 20px; overflow: hidden; display: none; margin: 15px 0; border: 2px solid var(--main); }

        .btn-voice { background: var(--accent); width: 50px; border-radius: 12px; color: white; }
    </style>
</head>
<body>

    <div id="feed" class="page active">
        <div class="logo">AND / Feed</div>
        <div class="card">
            <textarea id="postText" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"></textarea>
            <input type="text" id="postImg" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ">
            <button onclick="addPost()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
        </div>
        <div id="posts-container"></div>
    </div>

    <div id="friends" class="page">
        <div class="logo">AND / Friends</div>
        <div class="card">
            <h3>–ú–æ–∏ –¥—Ä—É–∑—å—è</h3>
            <div class="friend-item" onclick="openChat('–ú–∞–∫—Å–∏–º')">
                <div class="status-dot"></div>
                <div style="flex:1">–ú–∞–∫—Å–∏–º</div>
                <small style="color:var(--gray)">–ù–∞–ø–∏—Å–∞—Ç—å</small>
            </div>
            <div class="friend-item" onclick="openChat('–ê–Ω–Ω–∞')">
                <div class="status-dot" style="background:gray"></div>
                <div style="flex:1">–ê–Ω–Ω–∞</div>
                <small style="color:var(--gray)">–ë—ã–ª(–∞) –Ω–µ–¥–∞–≤–Ω–æ</small>
            </div>
        </div>
    </div>

    <div id="meet" class="page">
        <div class="logo">AND / Meet</div>
        <div class="card">
            <input type="text" id="roomName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã">
            <button onclick="startVideo()">–ù–∞—á–∞—Ç—å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫</button>
            <div id="video-container"></div>
            <button id="stopBtn" onclick="stopVideo()" style="display:none; background:var(--accent); margin-top:10px; color:white;">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
        </div>
    </div>

    <div id="profile" class="page">
        <div class="logo">AND / Me</div>
        <div class="card" style="text-align:center;">
            <div style="width:80px; height:80px; background:var(--main); border-radius:20px; margin:0 auto 15px;"></div>
            <h2>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</h2>
            <p style="color:var(--gray)">ID: 0001</p>
        </div>
    </div>

    <div id="chat-window">
        <div class="chat-header">
            <span onclick="closeChat()" style="cursor:pointer; font-size:24px;">‚úï</span>
            <strong id="chat-user-name">–ß–∞—Ç</strong>
        </div>
        <div class="messages-area" id="msg-area"></div>
        <div style="padding:15px; display:flex; gap:10px; background:var(--card);">
            <input type="text" id="chatInput" placeholder="–¢–µ–∫—Å—Ç..." style="margin:0">
            <button class="btn-voice" id="voiceBtn" onclick="toggleRecording()">üé§</button>
            <button onclick="sendMsg()" style="width:60px">></button>
        </div>
    </div>

    <nav>
        <div class="nav-item active" onclick="showPage('feed', this)">–õ–ï–ù–¢–ê</div>
        <div class="nav-item" onclick="showPage('friends', this)">–î–†–£–ó–¨–Ø</div>
        <div class="nav-item" onclick="showPage('meet', this)">MEET</div>
        <div class="nav-item" onclick="showPage('profile', this)">–ü–†–û–§–ò–õ–¨</div>
    </nav>

<script>
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    function showPage(pageId, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        el.classList.add('active');
    }

    // –õ–µ–Ω—Ç–∞
    let posts = [{ author: "AND Team", text: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–æ–≤—É—é —ç—Ä—É –æ–±—â–µ–Ω–∏—è.", likes: 10 }];
    function renderPosts() {
        const container = document.getElementById('posts-container');
        container.innerHTML = posts.map(p => `
            <div class="card">
                <strong>${p.author}</strong>
                <p>${p.text}</p>
                ${p.img ? `<img src="${p.img}" class="post-img">` : ''}
            </div>
        `).reverse().join('');
    }
    function addPost() {
        const t = document.getElementById('postText');
        const i = document.getElementById('postImg');
        if(!t.value) return;
        posts.push({ author: "–í—ã", text: t.value, img: i.value });
        t.value = ''; i.value = '';
        renderPosts();
    }

    // –ß–∞—Ç
    function openChat(name) {
        document.getElementById('chat-user-name').innerText = name;
        document.getElementById('chat-window').style.display = 'flex';
    }
    function closeChat() { document.getElementById('chat-window').style.display = 'none'; }
    function sendMsg(audioUrl = null) {
        const area = document.getElementById('msg-area');
        const input = document.getElementById('chatInput');
        const div = document.createElement('div');
        div.className = 'msg sent';
        if(audioUrl) {
            div.innerHTML = `<audio controls src="${audioUrl}" style="width:150px; filter:invert(1)"></audio>`;
        } else {
            if(!input.value) return;
            div.innerText = input.value;
            input.value = '';
        }
        area.appendChild(div);
        area.scrollTop = area.scrollHeight;
    }

    // –ì–æ–ª–æ—Å
    let mediaRecorder;
    let chunks = [];
    async function toggleRecording() {
        const btn = document.getElementById('voiceBtn');
        if (!mediaRecorder || mediaRecorder.state === "inactive") {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(stream);
            chunks = [];
            mediaRecorder.ondataavailable = e => chunks.push(e.data);
            mediaRecorder.onstop = () => {
                const blob = new Blob(chunks, { type: 'audio/mpeg' });
                sendMsg(URL.createObjectURL(blob));
            };
            mediaRecorder.start();
            btn.innerText = "‚èπ";
        } else {
            mediaRecorder.stop();
            btn.innerText = "üé§";
        }
    }

    // –í–∏–¥–µ–æ Jitsi
    let api = null;
    function startVideo() {
        const room = document.getElementById('roomName').value || 'and-global';
        document.getElementById('video-container').style.display = 'block';
        document.getElementById('stopBtn').style.display = 'block';
        api = new JitsiMeetExternalAPI("meet.jit.si", {
            roomName: "AND-MEET-" + room,
            parentNode: document.getElementById('video-container')
        });
    }
    function stopVideo() {
        if(api) api.dispose();
        document.getElementById('video-container').style.display = 'none';
        document.getElementById('stopBtn').style.display = 'none';
    }

    renderPosts();
</script>
</body>
</html>
