<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AND | GLOBAL OS</title>
    <script src="https://meet.jit.si/external_api.js"></script>
    <style>
        :root { --main: #00ff88; --bg: #000; --card: #1a1a1a; --text: #eee; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        .nav { display: flex; background: #111; border-bottom: 1px solid #333; position: sticky; top: 0; z-index: 10; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .nav-btn { flex: 0 0 auto; padding: 15px 20px; text-align: center; font-size: 11px; font-weight: bold; cursor: pointer; color: #777; white-space: nowrap; }
        .nav-btn.active { color: var(--main); border-bottom: 2px solid var(--main); }

        .container { flex: 1; overflow-y: auto; padding: 15px; }
        .box { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #333; }
        
        input, textarea { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; border-radius: 8px; box-sizing: border-box; margin-bottom: 10px; outline: none; }
        .btn { background: var(--main); color: #000; border: none; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; }
        
        /* –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ */
        .web-search-grid { display: none; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .web-btn { padding: 10px; border-radius: 8px; background: #222; color: #fff; font-size: 11px; text-align: center; cursor: pointer; border: 1px solid #444; text-decoration: none; }
        .web-btn:hover { border-color: var(--main); color: var(--main); }
        
        .hidden { display: none; }
        .post-time { color: var(--main); font-size: 10px; margin-bottom: 5px; display: block; }
    </style>
</head>
<body>

<div class="nav">
    <div class="nav-btn active" id="b-feed" onclick="show('feed')">–õ–ï–ù–¢–ê üì±</div>
    <div class="nav-btn" id="b-chat" onclick="show('chat')">–ß–ê–¢ üí¨</div>
    <div class="nav-btn" id="b-movie" onclick="show('movie')">–ö–ò–ù–û üçø</div>
    <div class="nav-btn" id="b-music" onclick="show('music')">–ú–£–ó–´–ö–ê üéµ</div>
    <div class="nav-btn" id="b-call" onclick="show('call')">–í–ò–î–ï–û üé•</div>
</div>

<div class="container">
    <div id="p-feed">
        <div class="box">
            <input type="text" id="find" placeholder="üîç –ü–æ–∏—Å–∫ –≤ –ª–µ–Ω—Ç–µ –∏–ª–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ..." oninput="draw()">
            
            <div id="web-tools" class="web-search-grid">
                <div class="web-btn" onclick="globalSearch('google')">üåê –ù–∞–π—Ç–∏ –≤ Google</div>
                <div class="web-btn" onclick="globalSearch('wiki')">üìñ –í–∏–∫–∏–ø–µ–¥–∏—è</div>
            </div>

            <textarea id="txt" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?" rows="2"></textarea>
            <button class="btn" onclick="add()">–û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨</button>
        </div>
        <div id="wall"></div>
    </div>

    <div id="p-chat" class="hidden">
        <div class="box">
            <h3>–ú–ï–°–°–ï–ù–î–ñ–ï–†</h3>
            <input type="text" id="chat-room" placeholder="–ò–º—è –∫–æ–º–Ω–∞—Ç—ã">
            <button class="btn" onclick="startJ('chat')">–í–û–ô–¢–ò</button>
            <div id="chat-f" style="margin-top:10px;"></div>
        </div>
    </div>

    <div id="p-movie" class="hidden"><div class="box"><h3>–ö–ò–ù–û</h3><input type="text" id="m-input" placeholder="–§–∏–ª—å–º..."><button class="btn" onclick="globalSearch('movie')">–ò–°–ö–ê–¢–¨ –§–ò–õ–¨–ú</button></div></div>
    <div id="p-music" class="hidden"><div class="box"><h3>–ú–£–ó–´–ö–ê</h3><input type="text" id="ms-input" placeholder="–ü–µ—Å–Ω—è..."><button class="btn" onclick="globalSearch('music')">–ò–°–ö–ê–¢–¨ –ú–£–ó–´–ö–£</button></div></div>
    <div id="p-call" class="hidden"><div class="box"><h3>–í–ò–î–ï–û–ó–í–û–ù–û–ö</h3><input type="text" id="v-room" placeholder="–ö–æ–º–Ω–∞—Ç–∞..."><button class="btn" onclick="startJ('video')">–°–¢–ê–†–¢</button><div id="video-f" style="margin-top:10px;"></div></div></div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('posts_db')) || [];
    let jApi = null;

    function add() {
        let i = document.getElementById('txt'); if(!i.value.trim()) return;
        db.unshift({t: i.value, d: new Date().toLocaleTimeString()});
        i.value = ''; localStorage.setItem('posts_db', JSON.stringify(db)); draw();
    }

    function draw() {
        let q = document.getElementById('find').value.toLowerCase();
        let tools = document.getElementById('web-tools');
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –µ—Å–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ —á—Ç–æ-—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ
        tools.style.display = q.length > 0 ? 'grid' : 'none';

        document.getElementById('wall').innerHTML = db.filter(x => x.t.toLowerCase().includes(q))
            .map(x => `<div class="box"><span class="post-time">${x.d}</span><br>${x.t}</div>`).join('');
    }

    // –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ü–û–ò–°–ö
    function globalSearch(mode) {
        let query = "";
        if (mode === 'google' || mode === 'wiki') query = document.getElementById('find').value;
        if (mode === 'movie') query = document.getElementById('m-input').value;
        if (mode === 'music') query = document.getElementById('ms-input').value;

        if(!query) return;

        let url = "";
        switch(mode) {
            case 'google': url = `https://www.google.com/search?q=${encodeURIComponent(query)}`; break;
            case 'wiki': url = `https://ru.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(query)}`; break;
            case 'movie': url = `https://www.google.com/search?q=—Å–º–æ—Ç—Ä–µ—Ç—å+—Ñ–∏–ª—å–º+${encodeURIComponent(query)}`; break;
            case 'music': url = `https://music.youtube.com/search?q=${encodeURIComponent(query)}`; break;
        }
        window.open(url, '_blank');
    }

    function show(id) {
        ['feed', 'chat', 'movie', 'music', 'call'].forEach(t => {
            document.getElementById('p-'+t).classList.toggle('hidden', t !== id);
            document.getElementById('b-'+t).classList.toggle('active', t === id);
        });
        if(jApi) { jApi.dispose(); jApi = null; }
    }

    function startJ(type) {
        let r = type === 'chat' ? document.getElementById('chat-room').value : document.getElementById('v-room').value;
        let f = type === 'chat' ? document.getElementById('chat-f') : document.getElementById('video-f');
        if(jApi) jApi.dispose();
        jApi = new JitsiMeetExternalAPI("meet.jit.si", {
            roomName: r || 'AND-Room', parentNode: f, width: '100%', height: 400,
            configOverwrite: { startWithVideoMuted: (type === 'chat') }
        });
    }

    draw();
</script>
</body>
</html>
