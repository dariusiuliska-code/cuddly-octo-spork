<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AND | MEGA SYSTEM</title>
    <script src="https://meet.jit.si/external_api.js"></script>
    <style>
        :root { --main: #00ff88; --bg: #000; --card: #1a1a1a; --text: #eee; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π */
        .nav { display: flex; background: #111; border-bottom: 1px solid #333; position: sticky; top: 0; z-index: 10; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .nav-btn { flex: 0 0 auto; padding: 15px 25px; text-align: center; font-size: 11px; font-weight: bold; cursor: pointer; color: #777; white-space: nowrap; transition: 0.3s; }
        .nav-btn.active { color: var(--main); border-bottom: 2px solid var(--main); }

        .container { flex: 1; overflow-y: auto; padding: 15px; }
        .box { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #333; }
        
        input, textarea { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; border-radius: 8px; box-sizing: border-box; margin-bottom: 10px; outline: none; }
        .btn { background: var(--main); color: #000; border: none; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .s-btn { padding: 12px; border-radius: 8px; background: #222; color: #fff; font-size: 11px; text-align: center; cursor: pointer; border: 1px solid #444; text-decoration: none; }
        
        .hidden { display: none; }
        iframe { border-radius: 12px; border: none; width: 100%; height: 350px; background: #000; }
        .post { border-left: 2px solid var(--main); padding-left: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="nav">
    <div class="nav-btn active" id="b-feed" onclick="show('feed')">–õ–ï–ù–¢–ê</div>
    <div class="nav-btn" id="b-chat" onclick="show('chat')">–ß–ê–¢ üí¨</div>
    <div class="nav-btn" id="b-movie" onclick="show('movie')">–ö–ò–ù–û üçø</div>
    <div class="nav-btn" id="b-music" onclick="show('music')">–ú–£–ó–´–ö–ê üéµ</div>
    <div class="nav-btn" id="b-call" onclick="show('call')">–í–ò–î–ï–û üé•</div>
</div>

<div class="container">
    <div id="p-feed">
        <div class="box">
            <input type="text" id="find" placeholder="üîç –ù–∞–π—Ç–∏ –ø–æ—Å—Ç –∏–ª–∏ –≤–µ—â—å –≤ —Å–µ—Ç–∏..." oninput="draw()">
            <textarea id="txt" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å..." rows="2"></textarea>
            <button class="btn" onclick="add()">–û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨</button>
        </div>
        <div id="wall"></div>
    </div>

    <div id="p-chat" class="hidden">
        <div class="box">
            <h3 style="color:var(--main); margin-top:0;">–ú–ï–°–°–ï–ù–î–ñ–ï–†</h3>
            <input type="text" id="chat-room" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã —á–∞—Ç–∞">
            <button class="btn" onclick="startJ('chat')">–í–û–ô–¢–ò –í –ß–ê–¢</button>
            <div id="chat-f" style="margin-top:10px;"></div>
        </div>
    </div>

    <div id="p-movie" class="hidden">
        <div class="box">
            <h3 style="color:red; margin-top:0;">AND CINEMA</h3>
            <input type="text" id="m-input" placeholder="–ö–∞–∫–æ–π —Ñ–∏–ª—å–º –∏—â–µ–º?">
            <div class="grid">
                <div class="s-btn" onclick="searchMedia('movie', 'google')">–ü–æ–∏—Å–∫</div>
                <div class="s-btn" onclick="searchMedia('movie', 'hdvb')">–°–º–æ—Ç—Ä–µ—Ç—å</div>
            </div>
        </div>
        <iframe src="https://www.youtube.com/embed/qwosU7e9mqc"></iframe>
    </div>

    <div id="p-music" class="hidden">
        <div class="box">
            <h3 style="color:var(--main); margin-top:0;">–ú–£–ó-–ë–ê–ó–ê</h3>
            <input type="text" id="ms-input" placeholder="–ü–µ—Å–Ω—è –∏–ª–∏ –≥—Ä—É–ø–ø–∞...">
            <div class="grid">
                <div class="s-btn" onclick="searchMedia('music', 'google')">–í —Å–µ—Ç–∏</div>
                <div class="s-btn" onclick="searchMedia('music', 'soundcloud')">SoundCloud</div>
            </div>
        </div>
    </div>

    <div id="p-call" class="hidden">
        <div class="box">
            <h3 style="color:var(--main); margin-top:0;">–í–ò–î–ï–û–ó–í–û–ù–û–ö</h3>
            <input type="text" id="v-room" placeholder="–ò–º—è –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è —Å–æ–∑–≤–æ–Ω–∞">
            <button class="btn" onclick="startJ('video')">–ó–ê–ü–£–°–¢–ò–¢–¨ –ö–ê–ú–ï–†–£</button>
            <div id="video-f" style="margin-top:10px;"></div>
        </div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('posts_db')) || [];
    let jApi = null;

    function add() {
        let i = document.getElementById('txt'); if(!i.value.trim()) return;
        db.unshift({t: i.value, d: new Date().toLocaleTimeString()});
        i.value = ''; localStorage.setItem('posts_db', JSON.stringify(db)); draw();
    }

    function draw() {
        let q = document.getElementById('find').value.toLowerCase();
        document.getElementById('wall').innerHTML = db.filter(x => x.t.toLowerCase().includes(q))
            .map(x => `<div class="box post"><small>${x.d}</small><br>${x.t}</div>`).join('');
    }

    function searchMedia(type, source) {
        let q = type === 'movie' ? document.getElementById('m-input').value : document.getElementById('ms-input').value;
        if(!q) return;
        let url = source === 'google' ? `https://www.google.com/search?q=${type}+${encodeURIComponent(q)}` :
                  source === 'hdvb' ? `https://www.google.com/search?q=—Å–º–æ—Ç—Ä–µ—Ç—å+–æ–Ω–ª–∞–π–Ω+${encodeURIComponent(q)}` :
                  `https://soundcloud.com/search?q=${encodeURIComponent(q)}`;
        window.open(url, '_blank');
    }

    function show(id) {
        ['feed', 'chat', 'movie', 'music', 'call'].forEach(t => {
            document.getElementById('p-'+t).classList.toggle('hidden', t !== id);
            document.getElementById('b-'+t).classList.toggle('active', t === id);
        });
        if(jApi) { jApi.dispose(); jApi = null; } // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–≤—è–∑—å –ø—Ä–∏ —Å–º–µ–Ω–µ –≤–∫–ª–∞–¥–∫–∏
    }

    function startJ(type) {
        let r = type === 'chat' ? document.getElementById('chat-room').value : document.getElementById('v-room').value;
        let f = type === 'chat' ? document.getElementById('chat-f') : document.getElementById('video-f');
        if(jApi) jApi.dispose();
        jApi = new JitsiMeetExternalAPI("meet.jit.si", {
            roomName: r || 'AND-Room',
            parentNode: f,
            width: '100%',
            height: 400,
            configOverwrite: { startWithVideoMuted: (type === 'chat') } // –í —á–∞—Ç–µ –∫–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞
        });
    }

    draw();
</script>
</body>
</html>
