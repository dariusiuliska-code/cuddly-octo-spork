<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AND | GLOBAL OS ULTIMATE</title>
    <style>
        :root { --main: #00ff88; --bg: #000; --card: rgba(20, 20, 20, 0.9); --text: #eee; --ai-color: #00d4ff; }
        
        body { 
            margin: 0; background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; 
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
            background-size: cover; background-position: center; transition: background 1.2s ease-in-out;
        }
        
        /* –°—Ç–µ–∫–ª—è–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç */
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: rgba(0,0,0,0.85); border-bottom: 1px solid #333; backdrop-filter: blur(15px); z-index: 1000; }
        .logo { font-weight: bold; color: var(--main); text-shadow: 0 0 12px var(--main); font-size: 18px; letter-spacing: 1px; }
        #weather-info { font-size: 12px; color: var(--main); }

        .nav { display: flex; background: rgba(0,0,0,0.9); border-bottom: 1px solid #333; overflow-x: auto; flex-shrink: 0; scrollbar-width: none; }
        .nav-btn { flex: 1; padding: 15px 10px; font-size: 10px; font-weight: bold; cursor: pointer; color: #555; text-transform: uppercase; text-align: center; border-bottom: 2px solid transparent; min-width: 90px; }
        .nav-btn.active { color: var(--main); border-bottom-color: var(--main); background: rgba(0,255,136,0.1); }
        .nav-btn.ai-special { color: var(--ai-color); }

        .container { flex: 1; overflow-y: auto; padding: 12px; backdrop-filter: brightness(0.5); }
        .box { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #444; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
        
        input, textarea { width: 100%; padding: 12px; background: rgba(0,0,0,0.7); border: 1px solid #555; color: #fff; border-radius: 8px; box-sizing: border-box; margin-bottom: 10px; outline: none; font-size: 16px; border-left: 3px solid var(--main); }
        .btn { background: var(--main); color: #000; border: none; padding: 14px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-bottom: 8px; transition: 0.3s; }
        .btn:hover { filter: brightness(1.2); }

        /* –¢–µ—Ä–º–∏–Ω–∞–ª AI */
        .ai-terminal { background: rgba(0, 10, 20, 0.95); border: 1px solid var(--ai-color); color: var(--ai-color); font-family: 'Courier New', monospace; height: 380px; display: flex; flex-direction: column; }
        #ai-log { flex: 1; overflow-y: auto; padding: 15px; font-size: 13px; scroll-behavior: smooth; }
        .ai-input-style { border-left: 3px solid var(--ai-color) !important; color: var(--ai-color) !important; }

        .wa-display { background: #000; padding: 10px; color: #00ff00; font-family: monospace; font-size: 11px; border: 1px solid #333; margin-bottom: 10px; text-align: center; box-shadow: inset 0 0 10px #003300; }
        .hidden { display: none !important; }
        .post { border-bottom: 1px solid #333; padding: 12px 0; animation: slideIn 0.3s ease-out; }
        .post b { color: var(--main); font-size: 11px; display: block; margin-bottom: 3px; }
        
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

<div class="top-bar">
    <div class="logo">AND GLOBAL OS</div>
    <div id="weather-info">CONNECTING...</div>
</div>

<div class="nav">
    <div class="nav-btn active" onclick="show('chat', this)">MESSENGER üí¨</div>
    <div class="nav-btn ai-special" onclick="show('ai', this)">GEMINI AI ü§ñ</div>
    <div class="nav-btn" onclick="show('search', this)">–ü–û–ò–°–ö üîç</div>
    <div class="nav-btn" onclick="show('media', this)">MEDIA üé¨</div>
</div>

<div class="container">
    <div id="p-chat" class="page">
        <div class="box">
            <textarea id="msg-input" placeholder="–ü–æ–¥–µ–ª–∏—Å—å –º—ã—Å–ª—è–º–∏..." rows="2"></textarea>
            <button class="btn" onclick="sendMsg()">–û–¢–ü–†–ê–í–ò–¢–¨ –í –ì–õ–û–ë–ê–õ</button>
        </div>
        <div id="chat-wall"></div>
    </div>

    <div id="p-ai" class="page hidden">
        <div class="box ai-terminal">
            <div id="ai-log">>>> –ö–û–†-–°–ò–°–¢–ï–ú–ê GEMINI –ü–û–î–ö–õ–Æ–ß–ï–ù–ê...<br>>>> –ò—Å–ø–æ–ª—å–∑—É–π "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ [—Ç–µ–º–∞]", —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –º–∏—Ä.</div>
            <input type="text" id="ai-input" class="ai-input-style" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—É..." onkeypress="if(event.key==='Enter') aiTalk()">
            <button class="btn" style="background:var(--ai-color); color:#000" onclick="aiTalk()">–í–´–ü–û–õ–ù–ò–¢–¨</button>
        </div>
    </div>

    <div id="p-search" class="page hidden">
        <div class="box">
            <input type="text" id="search-q" placeholder="–ß—Ç–æ –∏—â–µ–º —Å–µ–≥–æ–¥–Ω—è?">
            <button class="btn" onclick="doSearch('google')">GOOGLE (–ò–ù–§–û)</button>
            <button class="btn" style="background:#ff0000; color:#fff" onclick="doSearch('youtube')">YOUTUBE (–ú–£–ó–´–ö–ê/–í–ò–î–ï–û)</button>
            <button class="btn" style="background:#f4c20d; color:#000" onclick="doSearch('kinopoisk')">–ö–ò–ù–û–ü–û–ò–°–ö (–§–ò–õ–¨–ú–´)</button>
        </div>
    </div>

    <div id="p-media" class="page hidden">
        <div class="box">
            <div class="wa-display">
                <div id="wa-title">WINAMP 2.91</div>
                <div id="wa-time">00:00</div>
            </div>
            <input type="text" id="wa-url" placeholder="–í—Å—Ç–∞–≤—å –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ MP3">
            <button class="btn" onclick="waPlay()">PLAY</button>
            <button class="btn" style="background:#444; color:#fff" onclick="waStop()">STOP</button>
            <audio id="main-audio"></audio>
        </div>
        <div class="box">
            <button class="btn" style="background:#222; color:var(--main); border: 1px solid var(--main);" onclick="window.open('https://meet.jit.si/GlobalRoomAND', '_blank')">–ó–ê–ü–£–°–¢–ò–¢–¨ –í–ò–î–ï–û–ß–ê–¢ üé•</button>
        </div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('msgs')) || [];
    const audio = document.getElementById('main-audio');

    function show(id, btn) {
        document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
        document.getElementById('p-' + id).classList.remove('hidden');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    function sendMsg() {
        const inp = document.getElementById('msg-input');
        if(!inp.value.trim()) return;
        db.unshift({t: inp.value, d: new Date().toLocaleString()});
        inp.value = '';
        localStorage.setItem('msgs', JSON.stringify(db));
        drawChat();
    }

    function drawChat() {
        document.getElementById('chat-wall').innerHTML = db.map(m => `
            <div class="box post" style="margin-bottom: 10px;">
                <b>[${m.d}]</b>
                <span>${m.t}</span>
            </div>`).join('');
    }

    function aiTalk() {
        const inp = document.getElementById('ai-input');
        const log = document.getElementById('ai-log');
        if(!inp.value.trim()) return;
        
        const q = inp.value;
        log.innerHTML += `<div style="color:#fff; margin-top: 10px;">> USER: ${q}</div>`;
        const cmd = q.toLowerCase();
        inp.value = '';
        
        let res = "–ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞... –î–∏—Ä–µ–∫—Ç–∏–≤–∞ –ø—Ä–∏–Ω—è—Ç–∞.";

        if(cmd.startsWith("–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ")) {
            const theme = q.substring(12).trim();
            const finalUrl = `https://source.unsplash.com/1600x900/?${encodeURIComponent(theme)}`;
            document.body.style.backgroundImage = `url('${finalUrl}')`;
            localStorage.setItem('saved_bg', finalUrl);
            res = `–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ —Ç–µ–º–µ: "${theme}". –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–µ–Ω.`;
        } else if(cmd.includes("–ø—Ä–∏–≤–µ—Ç")) {
            res = "–°–∏—Å—Ç–µ–º–∞ GLOBAL OS –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ–±—è, —Å–æ–∑–¥–∞—Ç–µ–ª—å.";
        } else if(cmd.includes("—Å—Ç–∞—Ç—É—Å")) {
            res = `–Ø–¥—Ä–æ: v5.2 ULTIMATE. –ü–∞–º—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π: ${db.length}. –ü–ª–µ–µ—Ä: ${audio.paused ? 'IDLE' : 'ACTIVE'}.`;
        } else if(cmd.includes("–æ—á–∏—Å—Ç–∏—Ç—å")) {
            log.innerHTML = ">>> –õ–æ–≥–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Å—Ç–µ—Ä—Ç—ã."; return;
        }

        setTimeout(() => {
            log.innerHTML += `<div style="color:var(--ai-color); border-left: 2px solid var(--ai-color); padding-left: 10px; margin-top: 5px;">[GEMINI]: ${res}</div>`;
            log.scrollTop = log.scrollHeight;
        }, 400);
    }

    function doSearch(type) {
        const q = document.getElementById('search-q').value;
        if(!q) return;
        const urls = { 
            google: 'https://google.com/search?q=', 
            youtube: 'https://youtube.com/results?search_query=', 
            kinopoisk: 'https://www.kinopoisk.ru/index.php?kp_query=' 
        };
        window.open(urls[type] + encodeURIComponent(q), '_blank');
    }

    function waPlay() {
        const u = document.getElementById('wa-url').value;
        if(u) { audio.src = u; audio.play(); document.getElementById('wa-title').innerText = "STREAMING..."; }
    }
    function waStop() { audio.pause(); document.getElementById('wa-title').innerText = "STOPPED"; }

    audio.ontimeupdate = () => {
        const m = Math.floor(audio.currentTime / 60);
        const s = Math.floor(audio.currentTime % 60);
        document.getElementById('wa-time').innerText = `${m<10?'0':''}${m}:${s<10?'0':''}${s}`;
    };

    window.onload = () => {
        const saved = localStorage.getItem('saved_bg');
        if(saved) document.body.style.backgroundImage = `url('${saved}')`;
        fetch('https://wttr.in/?format=%c+%t').then(r => r.text()).then(t => document.getElementById('weather-info').innerText = t).catch(()=>"");
        drawChat();
    }
</script>
</body>
</html>
