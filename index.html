<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VOX OS v113 | MARKET RESTORED</title>
    <style>
        :root { --neon: #00f2ff; --accent: #7000ff; --bg: #050505; --glass: rgba(255, 255, 255, 0.05); --border: rgba(0, 242, 255, 0.3); }
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        #matrix-bg { position: fixed; inset: 0; z-index: 0; opacity: 0.15; pointer-events: none; }
        
        #status-bar { position: fixed; top: 0; width: 100%; padding: 15px 25px; z-index: 1000; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); display: flex; justify-content: space-between; border-bottom: 1px solid var(--border); }
        #ai-btn { background: linear-gradient(45deg, var(--neon), var(--accent)); border: none; color: #fff; padding: 10px 20px; border-radius: 30px; cursor: pointer; font-weight: bold; box-shadow: 0 0 15px rgba(0, 242, 255, 0.4); }
        #ai-btn.active { filter: hue-rotate(90deg); transform: scale(1.05); }

        #desktop { position: relative; z-index: 10; display: none; padding: 90px 20px; height: 100%; overflow-y: auto; }
        .main-hub { background: var(--glass); border: 1px solid var(--border); border-radius: 20px; padding: 20px; margin-bottom: 25px; backdrop-filter: blur(15px); }
        
        input { width: 100%; padding: 15px; background: rgba(0,0,0,0.6); border: 1px solid var(--border); color: var(--neon); border-radius: 12px; margin-bottom: 10px; text-align: center; font-size: 16px; }
        .btn { width: 100%; padding: 14px; background: var(--glass); color: var(--neon); border: 1px solid var(--neon); font-weight: bold; border-radius: 12px; cursor: pointer; text-transform: uppercase; margin-bottom: 10px; transition: 0.3s; }
        .btn:hover { background: var(--neon); color: #000; box-shadow: 0 0 20px var(--neon); }

        #apps-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(85px, 1fr)); gap: 20px; }
        .icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: 0.2s; }
        .icon span { font-size: 40px; margin-bottom: 8px; filter: drop-shadow(0 0 10px var(--neon)); }
        .icon label { font-size: 10px; text-transform: uppercase; color: rgba(255,255,255,0.7); text-align: center; font-weight: bold; }

        .window { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(10, 10, 15, 0.98); border: 1px solid var(--neon); display: none; flex-direction: column; z-index: 2000; width: 90%; max-width: 400px; border-radius: 20px; box-shadow: 0 0 50px rgba(0, 242, 255, 0.3); overflow: hidden;}
        .win-header { background: linear-gradient(90deg, var(--neon), var(--accent)); color: #000; padding: 15px; display: flex; justify-content: space-between; font-weight: bold; }
        .win-content { padding: 20px; text-align: center; }

        #lock { position: fixed; inset: 0; z-index: 9999; background: #000; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<canvas id="matrix-bg"></canvas>

<div id="status-bar">
    <div id="sys-title" style="color:var(--neon); font-weight:bold;">VOX OS v113</div>
    <button id="ai-btn" onclick="globalVox()">üé§ VOX CONTROL</button>
    <div id="clock">00:00</div>
</div>

<div id="lock">
    <div style="text-align:center; padding:40px; border:1px solid var(--border); border-radius:30px; background:rgba(10,10,15,0.9);">
        <h1 style="color:var(--neon); letter-spacing:10px;">VOX OS</h1>
        <input type="password" id="pin" placeholder="–í–í–ï–î–ò–¢–ï –ö–û–î">
        <button class="btn" onclick="auth()">–í–•–û–î</button>
    </div>
</div>

<div id="desktop">
    <div class="main-hub">
        <input id="global-search" placeholder="–ü–æ–∏—Å–∫ –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞...">
        <button class="btn" onclick="handleSearch()">–ü–û–ò–°–ö GOOGLE</button>
    </div>
    <div id="apps-grid">
        <div class="icon" onclick="window.open('https://google.com')"><span>üîç</span><label>Google</label></div>
        <div class="icon" onclick="showW('w-store-manual')"><span>üè™</span><label>Market</label></div>
        <div class="icon" onclick="showW('w-play')"><span>üéµ</span><label>Player</label></div>
        <div class="icon" onclick="showW('w-met')"><span>üì°</span><label>Meet AI</label></div>
        <div class="icon" onclick="showW('w-org')"><span>üíæ</span><label>Notes</label></div>
        <div id="custom-apps" style="display: contents;"></div>
        <div id="adm-ico" class="icon" style="display:none" onclick="showW('w-adm')"><span>‚ò£Ô∏è</span><label style="color:red">Root</label></div>
        <div class="icon" onclick="location.reload()"><span>üîí</span><label>–í—ã—Ö–æ–¥</label></div>
    </div>
</div>

<div id="w-store-manual" class="window"><div class="win-header"><span>–ú–ê–†–ö–ï–¢</span><span onclick="hideW('w-store-manual')" style="cursor:pointer">√ó</span></div><div class="win-content">
    <input id="manual-app-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è">
    <button class="btn" onclick="let n = document.getElementById('manual-app-input').value; if(n) askToInstall(n); hideW('w-store-manual');">–£–°–¢–ê–ù–û–í–ò–¢–¨</button>
</div></div>

<div id="w-choice" class="window"><div class="win-header"><span>INSTALLER</span><span onclick="hideW('w-choice')">√ó</span></div><div class="win-content">
    <p id="choice-text" style="color:var(--neon); font-weight:bold;"></p>
    <button class="btn" onclick="installConfirmed('store')">–û–¢–ö–†–´–¢–¨ –í STORE</button>
    <button class="btn" onclick="installConfirmed('local')">–î–û–ë–ê–í–ò–¢–¨ –ù–ê –°–¢–û–õ</button>
</div></div>

<div id="w-play" class="window"><div class="win-header"><span>VOX PLAYER</span><span onclick="hideW('w-play')" style="cursor:pointer">√ó</span></div><div class="win-content">
    <input id="media-url" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –º—É–∑—ã–∫—É –∏–ª–∏ YouTube">
    <button class="btn" onclick="playMedia()">–ò–ì–†–ê–¢–¨</button>
    <iframe id="v-frame" style="width:100%; height:0; border:none; margin-top:10px;"></iframe>
</div></div>

<div id="w-met" class="window"><div class="win-header"><span>MEET AI</span><span onclick="hideW('w-met')">√ó</span></div><div class="win-content">
    <input id="me-in" placeholder="ID –í—Å—Ç—Ä–µ—á–∏">
    <button class="btn" onclick="document.getElementById('me-in').value='VOX-'+Math.random().toString(36).substring(7).toUpperCase()">–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨</button>
    <button class="btn" onclick="window.open('https://meet.jit.si/'+document.getElementById('me-in').value)">–í–û–ô–¢–ò</button>
</div></div>

<div id="w-org" class="window"><div class="win-header"><span>–ó–ê–ú–ï–¢–ö–ò</span><span onclick="hideW('w-org')">√ó</span></div><div class="win-content">
    <textarea id="note-pad" style="width:100%; height:150px; background:#000; color:var(--neon); border:1px solid var(--border); padding:10px;"></textarea>
    <button class="btn" onclick="localStorage.setItem('vox_note', document.getElementById('note-pad').value); alert('–°–û–•–†–ê–ù–ï–ù–û')">–°–û–•–†–ê–ù–ò–¢–¨</button>
</div></div>

<script>
    let currentPendingApp = "";

    function auth() {
        let p = document.getElementById('pin').value;
        if(p === '111' || p === '777') {
            document.getElementById('adm-ico').style.display = (p === '777') ? 'flex' : 'none';
            document.getElementById('lock').style.display='none';
            document.getElementById('desktop').style.display='block';
            renderApps();
        } else { alert('–û–®–ò–ë–ö–ê –ö–û–î–ê'); }
    }

    function showW(id) { document.getElementById(id).style.display='flex'; }
    function hideW(id) { document.getElementById(id).style.display='none'; }

    function playMedia() {
        let url = document.getElementById('media-url').value;
        if(!url) return;
        let frame = document.getElementById('v-frame');
        if(url.includes('youtube.com') || url.includes('youtu.be')) {
            let id = url.split('v=')[1] || url.split('/').pop();
            frame.src = `https://www.youtube.com/embed/${id}?autoplay=1`;
            frame.style.height = "200px";
        } else { window.open(url); }
    }

    function askToInstall(name) {
        currentPendingApp = name;
        document.getElementById('choice-text').innerText = `–ü–†–ò–õ–û–ñ–ï–ù–ò–ï: ${name.toUpperCase()}`;
        showW('w-choice');
    }

    function installConfirmed(type) {
        if(type === 'store') {
            window.open(`https://play.google.com/store/search?q=${currentPendingApp}&c=apps`);
        } else {
            let apps = JSON.parse(localStorage.getItem('vox_apps_v113') || '[]');
            if(!apps.includes(currentPendingApp)) { apps.push(currentPendingApp); localStorage.setItem('vox_apps_v113', JSON.stringify(apps)); }
            renderApps();
        }
        hideW('w-choice');
    }

    function renderApps() {
        const container = document.getElementById('custom-apps');
        container.innerHTML = '';
        let apps = JSON.parse(localStorage.getItem('vox_apps_v113') || '[]');
        apps.forEach(name => {
            const div = document.createElement('div'); div.className = 'icon';
            div.innerHTML = `<span>üì±</span><label>${name}</label>`;
            div.onclick = () => window.open(`https://play.google.com/store/search?q=${name}&c=apps`);
            container.appendChild(div);
        });
    }

    function handleSearch() {
        let v = document.getElementById('global-search').value;
        if(v) window.open('https://www.google.com/search?q=' + encodeURIComponent(v));
    }

    function globalVox() {
        const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
        if(!Rec) return;
        const r = new Rec(); r.lang = 'ru-RU';
        const b = document.getElementById('ai-btn');
        b.classList.add('active');
        r.onresult = (e) => {
            const cmd = e.results[0][0].transcript.toLowerCase();
            document.getElementById('global-search').value = cmd;
            if(cmd.includes("–º–∞—Ä–∫–µ—Ç") || cmd.includes("–º–∞–≥–∞–∑–∏–Ω")) showW('w-store-manual');
            else if(cmd.includes("–º—É–∑—ã–∫") || cmd.includes("–ø–ª–µ–µ—Ä")) showW('w-play');
            else if(cmd.includes("—Å–∫–∞—á–∞–π") || cmd.includes("—É—Å—Ç–∞–Ω–æ–≤–∏")) {
                let appName = cmd.replace(/—Å–∫–∞—á–∞–π|—É—Å—Ç–∞–Ω–æ–≤–∏|–ø—Ä–æ–≥—Ä–∞–º–º—É/g, "").trim();
                if(appName) askToInstall(appName);
            } 
            else if(cmd.includes("–≥—É–≥–ª")) window.open('https://google.com');
            else if(cmd.includes("–∑–∞–º–µ—Ç–∫")) showW('w-org');
            else handleSearch();
        };
        r.onend = () => b.classList.remove('active');
        r.start();
    }

    const c = document.getElementById('matrix-bg');
    const ctx = c.getContext('2d');
    c.width = window.innerWidth; c.height = window.innerHeight;
    const drops = Array(Math.floor(c.width/20)).fill(1);
    function draw() {
        ctx.fillStyle = "rgba(0,0,0,0.05)"; ctx.fillRect(0,0,c.width,c.height);
        ctx.fillStyle = "#00f2ff"; drops.forEach((y,i) => {
            ctx.fillText(Math.floor(Math.random()*2), i*20, y*20);
            if(y*20 > c.height && Math.random() > 0.975) drops[i]=0; drops[i]++;
        });
    }
    setInterval(draw, 50);
    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString().slice(0,5); }, 1000);
</script>
</body>
</html>
