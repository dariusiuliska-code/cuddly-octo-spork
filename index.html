<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VOX OS v12.0 | THE ONE</title>
    <style>
        :root { --main: #00ff41; --bg: #000; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; color: var(--main); 
            font-family: 'Consolas', monospace; overflow: hidden; 
        }

        #matrix-canvas { position: fixed; inset: 0; z-index: -1; opacity: 0.4; pointer-events: none; }

        /* –û–∫–Ω–∞ */
        .window {
            position: absolute; min-width: 290px; max-width: 95vw;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid var(--main);
            display: none; flex-direction: column; z-index: 10;
            box-shadow: 0 0 25px rgba(0, 255, 65, 0.4);
        }

        .window-header {
            background: var(--main); padding: 12px; cursor: move;
            display: flex; justify-content: space-between; color: #000;
            font-weight: bold; font-size: 13px; user-select: none;
            touch-action: none;
        }

        .close-btn { cursor: pointer; background: #000; color: var(--main); border: 1px solid var(--main); padding: 2px 8px; }

        .window-content { padding: 15px; flex: 1; overflow-y: auto; }

        /* –ö–Ω–æ–ø–∫–∏ –∏ –∏–Ω–ø—É—Ç—ã */
        input { 
            width: 100%; padding: 12px; background: #000; border: 1px solid var(--main); 
            color: var(--main); margin-bottom: 10px; font-family: inherit; font-size: 16px; outline: none;
        }
        .btn { 
            background: var(--main); color: #000; border: none; padding: 12px; 
            font-weight: bold; width: 100%; cursor: pointer; text-transform: uppercase; 
            margin-bottom: 8px; font-size: 11px; transition: 0.2s;
        }
        .btn:active { background: #fff; }

        /* –¢–∞—Å–∫–±–∞—Ä */
        .taskbar {
            position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.9); border: 1px solid var(--main);
            display: flex; gap: 12px; padding: 10px 15px; z-index: 1000; border-radius: 8px;
        }
        .app-icon { font-size: 24px; cursor: pointer; transition: 0.3s; }
        .app-icon:hover { transform: scale(1.3) translateY(-5px); filter: drop-shadow(0 0 8px var(--main)); }

        #lock-screen {
            position: fixed; inset: 0; background: #000; z-index: 2000;
            display: flex; align-items: center; justify-content: center; flex-direction: column;
        }

        @media (max-width: 600px) {
            .window { width: 92% !important; left: 4% !important; top: 12% !important; }
            .taskbar { gap: 8px; padding: 8px; width: 95%; justify-content: space-around; }
        }
    </style>
</head>
<body>

<canvas id="matrix-canvas"></canvas>

<div id="lock-screen">
    <div style="font-size: 24px; margin-bottom: 20px; letter-spacing: 5px;">VOX SYSTEM 12.0</div>
    <input type="password" id="access-code" style="text-align:center; width: 220px;" placeholder="PASSWORD">
    <button class="btn" onclick="auth()" style="width: 220px;">ACCESS_GRANTED</button>
</div>

<div class="desktop">
    
    <div id="win-search" class="window" style="top: 20px; left: 20px; width: 350px;">
        <div class="window-header"><span>NET_CRAWLER</span><span class="close-btn" onclick="toggleWin('win-search')">X</span></div>
        <div class="window-content">
            <input type="text" id="net-q" placeholder="–ß—Ç–æ –∏—â–µ–º?">
            <button class="btn" onclick="runSearch('google')">GOOGLE_SEARCH</button>
            <button class="btn" onclick="runSearch('wiki')">WIKIPEDIA</button>
        </div>
    </div>

    <div id="win-films" class="window" style="top: 60px; left: 60px; width: 350px;">
        <div class="window-header"><span>CINEMA_MODULE</span><span class="close-btn" onclick="toggleWin('win-films')">X</span></div>
        <div class="window-content">
            <input type="text" id="film-q" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...">
            <button class="btn" onclick="runFilms()">SEARCH_FREE_HD</button>
        </div>
    </div>

    <div id="win-music" class="window" style="top: 100px; left: 100px; width: 350px;">
        <div class="window-header"><span>GOOGLE_AUDIO_CORE</span><span class="close-btn" onclick="toggleWin('win-music')">X</span></div>
        <div class="window-content">
            <input type="text" id="music-q" placeholder="–¢—Ä–µ–∫ –∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç...">
            <button class="btn" onclick="runMusic('google')">GOOGLE_MUSIC</button>
            <button class="btn" onclick="runMusic('yt')">YT_MUSIC</button>
        </div>
    </div>

    <div id="win-meet" class="window" style="top: 140px; left: 140px; width: 320px;">
        <div class="window-header"><span>SECURE_BRIDGE</span><span class="close-btn" onclick="toggleWin('win-meet')">X</span></div>
        <div class="window-content">
            <div id="m-info" style="border: 1px dashed var(--main); padding: 10px; margin-bottom: 10px; text-align: center; font-size: 11px;">LINE_IDLE</div>
            <button class="btn" onclick="runMeet()">GENERATE_CHANNEL</button>
        </div>
    </div>

    <div id="win-term" class="window" style="top: 180px; left: 40px; width: 420px;">
        <div class="window-header"><span>VOX_TERMINAL</span><span class="close-btn" onclick="toggleWin('win-term')">X</span></div>
        <div class="window-content">
            <div id="t-out" style="height:120px; overflow-y:auto; font-size:12px; margin-bottom:10px;">VOX_OS Kernel 12.0 active. Type 'hack'...</div>
            <input type="text" id="t-in" placeholder="Command...">
        </div>
    </div>

</div>

<div class="taskbar">
    <div class="app-icon" title="–ò–Ω—Ñ–æ" onclick="toggleWin('win-search')">üîç</div>
    <div class="app-icon" title="–ö–∏–Ω–æ" onclick="toggleWin('win-films')">üé¨</div>
    <div class="app-icon" title="–ú—É–∑—ã–∫–∞" onclick="toggleWin('win-music')">üéµ</div>
    <div class="app-icon" title="–°–≤—è–∑—å" onclick="toggleWin('win-meet')">üìû</div>
    <div class="app-icon" title="–¢–µ—Ä–º–∏–Ω–∞–ª" onclick="toggleWin('win-term')">üíª</div>
</div>

<script>
    // --- MATRIX ---
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');
    let w, h, cols, drops;
    function res() { 
        w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight;
        cols = Math.floor(w / 15); drops = Array(cols).fill(1);
    }
    window.onresize = res; res();
    function draw() {
        ctx.fillStyle = "rgba(0,0,0,0.08)"; ctx.fillRect(0,0,w,h);
        ctx.fillStyle = "#00ff41"; ctx.font = "15px monospace";
        drops.forEach((y, i) => {
            ctx.fillText(Math.floor(Math.random()*2), i*15, y*15);
            if(y*15 > h && Math.random() > 0.975) drops[i] = 0;
            drops[i]++;
        });
    }
    setInterval(draw, 50);

    // --- SYSTEM CORE ---
    function auth() {
        if(document.getElementById('access-code').value === "VOX-777") {
            document.getElementById('lock-screen').style.display = 'none';
        } else { alert("ACCESS_DENIED"); }
    }

    function toggleWin(id) {
        const win = document.getElementById(id);
        win.style.display = (win.style.display === 'flex') ? 'none' : 'flex';
        if(win.style.display === 'flex') { makeDraggable(win); focusWin(win); }
    }

    function focusWin(win) {
        document.querySelectorAll('.window').forEach(w => w.style.zIndex = 10);
        win.style.zIndex = 100;
    }

    // --- HYBRID DRAG (TOUCH + MOUSE) ---
    function makeDraggable(el) {
        let ox, oy;
        const h = el.querySelector('.window-header');
        const move = (e) => {
            const x = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const y = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
            el.style.left = (x - ox) + 'px'; el.style.top = (y - oy) + 'px';
        };
        const stop = () => { window.removeEventListener('mousemove', move); window.removeEventListener('touchmove', move); };
        const start = (e) => {
            const x = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const y = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
            ox = x - el.offsetLeft; oy = y - el.offsetTop;
            window.addEventListener('mousemove', move); window.addEventListener('touchmove', move);
            window.addEventListener('mouseup', stop); window.addEventListener('touchend', stop);
            focusWin(el);
        };
        h.addEventListener('mousedown', start); h.addEventListener('touchstart', start);
    }

    // --- LOGIC ---
    function runSearch(t) {
        const q = document.getElementById('net-q').value;
        if(!q) return;
        window.open(t === 'google' ? `https://google.com/search?q=${q}` : `https://ru.wikipedia.org/wiki/${q}`);
    }

    function runFilms() {
        const q = document.getElementById('film-q').value;
        if(!q) return;
        window.open(`https://google.com/search?q=${q}+—Å–º–æ—Ç—Ä–µ—Ç—å+–±–µ—Å–ø–ª–∞—Ç–Ω–æ+–æ–Ω–ª–∞–π–Ω+hd`);
    }

    function runMusic(t) {
        const q = document.getElementById('music-q').value;
        if(!q) return;
        window.open(t === 'google' ? `https://www.google.com/search?q=${q}+—Å–ª—É—à–∞—Ç—å+–±–µ—Å–ø–ª–∞—Ç–Ω–æ` : `https://music.youtube.com/search?q=${q}`);
    }

    function runMeet() {
        const id = "VOX-" + Math.random().toString(36).substring(7).toUpperCase();
        document.getElementById('m-info').innerHTML = `ID: ${id}<br><br><button class="btn" onclick="window.open('https://meet.jit.si/${id}')">OPEN_BRIDGE</button>`;
    }

    // --- TERMINAL ---
    document.getElementById('t-in').addEventListener('keydown', async (e) => {
        if(e.key === 'Enter') {
            const v = e.target.value.toLowerCase();
            const out = document.getElementById('t-out');
            out.innerHTML += `<div>> ${v}</div>`;
            if(v === 'hack') {
                const s = ["DECRYPTING...", "FIREWALL_DOWN", "ROOT_ACCESS_GRANTED"];
                for(let line of s) {
                    out.innerHTML += `<div style="color:#fff">${line}</div>`;
                    out.scrollTop = out.scrollHeight;
                    await new Promise(r => setTimeout(r, 600));
                }
            }
            e.target.value = ''; out.scrollTop = out.scrollHeight;
        }
    });
</script>
</body>
</html>
