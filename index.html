<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AND | GLOBAL OS + WINAMP</title>
    <script src="https://meet.jit.si/external_api.js"></script>
    <style>
        :root { --main: #00ff88; --bg: #000; --card: rgba(26, 26, 26, 0.9); --text: #eee; --winamp: #3a3a3a; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; background-size: cover; background-position: center; }
        
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); border-bottom: 1px solid #333; z-index: 100; }
        #weather-info { font-size: 14px; font-weight: bold; color: var(--main); }
        .logo { font-weight: bold; letter-spacing: 2px; color: var(--main); }

        .nav { display: flex; background: rgba(17, 17, 17, 0.95); border-bottom: 1px solid #333; overflow-x: auto; scrollbar-width: none; flex-shrink: 0; }
        .nav-btn { flex: 0 0 auto; padding: 15px 20px; font-size: 11px; font-weight: bold; cursor: pointer; color: #777; text-transform: uppercase; border-bottom: 2px solid transparent; }
        .nav-btn.active { color: var(--main); border-bottom: 2px solid var(--main); }

        .container { flex: 1; overflow-y: auto; padding: 10px; position: relative; }
        .box { background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #444; backdrop-filter: blur(10px); }
        
        input, textarea { width: 100%; padding: 12px; background: rgba(0,0,0,0.7); border: 1px solid #444; color: #fff; border-radius: 10px; margin-bottom: 10px; outline: none; font-size: 16px; }
        .btn { background: var(--main); color: #000; border: none; padding: 14px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; margin-bottom: 5px; }

        /* WINAMP PLAYER */
        .winamp { background: var(--winamp); border: 2px solid #555; padding: 10px; border-radius: 5px; color: #00ff00; font-family: monospace; box-shadow: inset 0 0 10px #000; }
        .wa-display { background: #000; padding: 5px; margin-bottom: 10px; border: 1px solid #555; font-size: 12px; overflow: hidden; white-space: nowrap; }
        .wa-controls { display: flex; gap: 5px; justify-content: center; }
        .wa-btn { background: #555; border: 1px solid #777; color: white; padding: 5px 10px; font-size: 10px; cursor: pointer; border-radius: 3px; }

        .hidden { display: none !important; }
        #video-persistent-container { width: 100%; border-radius: 12px; overflow: hidden; background: #000; height: 350px; border: 1px solid #333; margin-top: 10px; }
    </style>
</head>
<body>

<div class="top-bar">
    <div class="logo">AND GLOBAL</div>
    <div id="weather-info">üå§ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
</div>

<div class="nav">
    <div class="nav-btn active" onclick="show('feed', this)">–ß–ê–¢ / –õ–ï–ù–¢–ê üí¨</div>
    <div class="nav-btn" onclick="show('music', this)">PLAYER üìª</div>
    <div class="nav-btn" onclick="show('video', this)">–í–ò–î–ï–û–°–í–Ø–ó–¨ üé•</div>
    <div class="nav-btn" onclick="show('search', this)">–ü–û–ò–°–ö üîç</div>
</div>

<div class="container">
    <div id="p-feed" class="page">
        <div class="box">
            <textarea id="txt" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç..." rows="2"></textarea>
            <button class="btn" onclick="add()">–û–¢–ü–†–ê–í–ò–¢–¨</button>
        </div>
        <div id="wall"></div>
    </div>

    <div id="p-music" class="page hidden">
        <div class="box winamp">
            <div class="wa-display">
                <div id="wa-title">WINAMP 2.91 - –ü–†–ò–í–ï–¢!</div>
                <div id="wa-time">00:00</div>
            </div>
            <input type="text" id="wa-url" placeholder="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ MP3 –∏–ª–∏ –†–∞–¥–∏–æ..." style="background:#222; font-size:12px;">
            <div class="wa-controls">
                <button class="wa-btn" onclick="waPlay()">PLAY</button>
                <button class="wa-btn" onclick="waPause()">PAUSE</button>
                <button class="wa-btn" onclick="waStop()">STOP</button>
            </div>
            <audio id="main-audio" style="display:none"></audio>
        </div>
        <p style="font-size:10px; color:#666; text-align:center;">–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ .mp3 —Ñ–∞–π–ª –∏ –Ω–∞–∂–º–∏—Ç–µ Play</p>
    </div>

    <div id="p-video" class="page hidden">
        <div class="box">
            <input type="text" id="room-id" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã">
            <button class="btn" onclick="startCall()">–ù–ê–ß–ê–¢–¨ –ó–í–û–ù–û–ö</button>
            <button class="btn" style="background:#333; color:var(--main)" onclick="copyInvite()">üîó –°–°–´–õ–ö–ê –î–õ–Ø –î–†–£–ì–ê</button>
            <div id="video-persistent-container"></div>
        </div>
    </div>

    <div id="p-search" class="page hidden">
        <div class="box">
            <input type="text" id="global-q" placeholder="–ß—Ç–æ –∏—â–µ–º?">
            <button class="btn" onclick="webSearch('google')">GOOGLE</button>
            <button class="btn" style="background:#4285F4; color:#fff" onclick="openLens()">üì∑ –ü–û–ò–°–ö –ü–†–ï–î–ú–ï–¢–û–í (LENS)</button>
        </div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('posts_db')) || [];
    let api = null;
    const audio = document.getElementById('main-audio');

    // WINAMP FUNCTIONS
    function waPlay() {
        const url = document.getElementById('wa-url').value;
        if (url) {
            if(audio.src !== url) audio.src = url;
            audio.play();
            document.getElementById('wa-title').innerText = "PLAYING: " + url.split('/').pop();
        } else { alert("–í—Å—Ç–∞–≤—å —Å—Å—ã–ª–∫—É –Ω–∞ –º—É–∑—ã–∫—É!"); }
    }
    function waPause() { audio.pause(); }
    function waStop() { audio.pause(); audio.currentTime = 0; }
    
    // –¢–∞–π–º–µ—Ä –ø–ª–µ–µ—Ä–∞
    audio.ontimeupdate = () => {
        let m = Math.floor(audio.currentTime / 60);
        let s = Math.floor(audio.currentTime % 60);
        document.getElementById('wa-time').innerText = (m<10?'0':'')+m+':'+(s<10?'0':'')+s;
    };

    // –ß–ê–¢ / –õ–ï–ù–¢–ê
    function add() {
        let t = document.getElementById('txt'); if(!t.value) return;
        db.unshift({t: t.value, d: new Date().toLocaleTimeString()});
        t.value = ''; localStorage.setItem('posts_db', JSON.stringify(db)); draw();
    }
    function draw() {
        document.getElementById('wall').innerHTML = db.map(x => `<div class="box" style="margin-bottom:8px; padding:10px;"><b>${x.d}</b><br>${x.t}</div>`).join('');
    }

    // –í–ò–î–ï–û–°–í–Ø–ó–¨
    function startCall() {
        let r = document.getElementById('room-id').value || 'GlobalRoom';
        const container = document.getElementById('video-persistent-container');
        container.innerHTML = "";
        api = new JitsiMeetExternalAPI("meet.jit.si", { roomName: r, parentNode: container, width: '100%', height: 350 });
    }
    function copyInvite() {
        let r = document.getElementById('room-id').value || 'GlobalRoom';
        let url = window.location.origin + window.location.pathname + '?room=' + r;
        navigator.clipboard.writeText(url); alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!");
    }

    // –ù–ê–í–ò–ì–ê–¶–ò–Ø
    function show(id, btn) {
        document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
        document.getElementById('p-' + id).classList.remove('hidden');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    function openLens() { window.open('https://www.google.com/searchbyimage?sbisrc=4pts&image_url=', '_blank'); }
    function webSearch(t) { window.open(`https://google.com/search?q=${document.getElementById('global-q').value}`, '_blank'); }

    window.onload = () => {
        const params = new URLSearchParams(window.location.search);
        if (params.has('room')) {
            show('video', document.querySelectorAll('.nav-btn')[2]);
            document.getElementById('room-id').value = params.get('room');
            startCall();
        }
        fetch('https://wttr.in/?format=%c+%t').then(r => r.text()).then(t => document.getElementById('weather-info').innerText = t);
        draw();
    }
</script>
</body>
</html>
