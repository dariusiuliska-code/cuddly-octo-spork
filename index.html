<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AND MOBILE</title>
    <script src="https://meet.jit.si/external_api.js"></script>
    <style>
        :root { --main: #00ff88; --bg: #000; --card: #1a1a1a; --text: #eee; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: sans-serif; }
        
        /* –ú–ï–ù–Æ –°–í–ï–†–•–£ */
        .nav { display: flex; background: #111; border-bottom: 1px solid #333; position: sticky; top: 0; z-index: 10; }
        .nav-btn { flex: 1; padding: 15px; text-align: center; font-size: 12px; font-weight: bold; cursor: pointer; color: #777; }
        .nav-btn.active { color: var(--main); border-bottom: 2px solid var(--main); }

        .container { padding: 15px; }
        .box { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #333; }
        
        input, textarea { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; border-radius: 8px; box-sizing: border-box; margin-bottom: 10px; }
        .btn { background: var(--main); color: #000; border: none; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; }
        
        #video-chat { width: 100%; height: 350px; background: #000; border-radius: 8px; margin-top: 10px; display: none; }
        .hidden { display: none; }
        .post { border-left: 3px solid var(--main); padding-left: 10px; }
    </style>
</head>
<body>

<div class="nav">
    <div class="nav-btn active" id="b-feed" onclick="show('feed')">–õ–ï–ù–¢–ê</div>
    <div class="nav-btn" id="b-call" onclick="show('call')">–í–ò–î–ï–û</div>
    <div class="nav-btn" id="b-sec" onclick="show('sec')">–°–ï–ö–†–ï–¢</div>
</div>

<div class="container">
    <div id="p-feed">
        <div class="box">
            <input type="text" id="find" placeholder="üîç –ü–æ–∏—Å–∫..." oninput="draw()">
            <textarea id="txt" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å..." rows="2"></textarea>
            <button class="btn" onclick="add()">–û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨</button>
        </div>
        <div id="wall"></div>
    </div>

    <div id="p-call" class="hidden">
        <div class="box">
            <input type="text" id="room" placeholder="–ò–º—è –∫–æ–º–Ω–∞—Ç—ã">
            <button class="btn" onclick="goCall()">–ù–ê–ß–ê–¢–¨ –ó–í–û–ù–û–ö</button>
            <div id="video-chat"></div>
        </div>
    </div>

    <div id="p-sec" class="hidden">
        <div class="box" id="lock">
            <input type="password" id="key" placeholder="–ü–∞—Ä–æ–ª—å">
            <button class="btn" style="background:#ff0055; color:#fff" onclick="openSec()">–í–û–ô–¢–ò</button>
        </div>
        <div id="sec-wall" class="hidden"></div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('posts_db')) || [];
    let jApi = null;

    function add() {
        let i = document.getElementById('txt'); if(!i.value.trim()) return;
        db.unshift({t: i.value, d: new Date().toLocaleTimeString()});
        i.value = ''; localStorage.setItem('posts_db', JSON.stringify(db)); draw();
    }

    function draw() {
        let q = document.getElementById('find').value.toLowerCase();
        document.getElementById('wall').innerHTML = db.filter(x => x.t.toLowerCase().includes(q))
            .map(x => `<div class="box post"><small style="color:var(--main)">${x.d}</small><div>${x.t}</div></div>`).join('');
    }

    function show(id) {
        ['feed', 'call', 'sec'].forEach(t => {
            document.getElementById('p-'+t).classList.toggle('hidden', t !== id);
            document.getElementById('b-'+t).classList.toggle('active', t === id);
        });
        if(id !== 'call' && jApi) { jApi.dispose(); document.getElementById('video-chat').style.display='none'; }
    }

    function goCall() {
        let r = document.getElementById('room').value || 'WorkRoom';
        let v = document.getElementById('video-chat'); v.style.display = 'block';
        if(jApi) jApi.dispose();
        jApi = new JitsiMeetExternalAPI("meet.jit.si", { roomName: r, parentNode: v, width: '100%', height: 350 });
    }

    function openSec() {
        if(document.getElementById('key').value === '1234') {
            document.getElementById('lock').classList.add('hidden');
            document.getElementById('sec-wall').classList.remove('hidden');
            document.getElementById('sec-wall').innerHTML = '<div class="box">–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∑–æ–Ω–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞</div>';
        } else { alert('–ù–µ—Ç!'); }
    }

    draw(); // –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É
</script>
</body>
</html>
